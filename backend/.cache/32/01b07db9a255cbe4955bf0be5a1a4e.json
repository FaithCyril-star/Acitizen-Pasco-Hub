{"id":"CJu5","dependencies":[{"name":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\policies\\exponentialRetryPolicy.js.map","includedInParent":true,"mtime":1672192589674},{"name":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\package.json","includedInParent":true,"mtime":1672218648515},{"name":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\package.json","includedInParent":true,"mtime":1672192587139},{"name":"./requestPolicy","loc":{"line":3,"column":35,"index":110},"parent":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\policies\\exponentialRetryPolicy.js","resolved":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\policies\\requestPolicy.js"},{"name":"../util/exponentialBackoffStrategy","loc":{"line":4,"column":150,"index":279},"parent":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\policies\\exponentialRetryPolicy.js","resolved":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\util\\exponentialBackoffStrategy.js"},{"name":"../util/constants","loc":{"line":5,"column":26,"index":343},"parent":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\policies\\exponentialRetryPolicy.js","resolved":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\util\\constants.js"},{"name":"../restError","loc":{"line":6,"column":26,"index":390},"parent":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\policies\\exponentialRetryPolicy.js","resolved":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\restError.js"},{"name":"@azure/core-util","loc":{"line":7,"column":22,"index":428},"parent":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\policies\\exponentialRetryPolicy.js","resolved":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-util\\dist-esm\\src\\index.js"},{"name":"../log","loc":{"line":8,"column":23,"index":471},"parent":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\policies\\exponentialRetryPolicy.js","resolved":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-http\\dist-esm\\src\\log.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.RetryMode=exports.ExponentialRetryPolicy=exports.DefaultRetryOptions=void 0,exports.exponentialRetryPolicy=i;var e,t=require(\"./requestPolicy\"),r=require(\"../util/exponentialBackoffStrategy\"),n=require(\"../util/constants\"),o=require(\"../restError\"),s=require(\"@azure/core-util\"),a=require(\"../log\");function i(e,t,r){return{create:(n,o)=>new R(n,o,e,t,r)}}exports.RetryMode=e,function(e){e[e.Exponential=0]=\"Exponential\"}(e||(exports.RetryMode=e={}));const u={maxRetries:r.DEFAULT_CLIENT_RETRY_COUNT,retryDelayInMs:r.DEFAULT_CLIENT_RETRY_INTERVAL,maxRetryDelayInMs:r.DEFAULT_CLIENT_MAX_RETRY_INTERVAL};exports.DefaultRetryOptions=u;class R extends t.BaseRequestPolicy{constructor(e,t,n,o,s){super(e,t),this.retryCount=(0,r.isNumber)(n)?n:r.DEFAULT_CLIENT_RETRY_COUNT,this.retryInterval=(0,r.isNumber)(o)?o:r.DEFAULT_CLIENT_RETRY_INTERVAL,this.maxRetryInterval=(0,r.isNumber)(s)?s:r.DEFAULT_CLIENT_MAX_RETRY_INTERVAL}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).then(t=>l(this,e,t)).catch(t=>l(this,e,t.response,void 0,t))}}async function l(e,t,i,u,R){u=(0,r.updateRetryData)({retryInterval:e.retryInterval,minRetryInterval:0,maxRetryInterval:e.maxRetryInterval},u,R);const y=t.abortSignal&&t.abortSignal.aborted;if(y||!(0,r.shouldRetry)(e.retryCount,function(e){const t=null==e?void 0:e.status;return!(503===t&&null!=i&&i.headers.get(n.Constants.HeaderConstants.RETRY_AFTER)||void 0===t||t<500&&408!==t||501===t||505===t)},u,i)){if(y||R||!i){throw u.error||new o.RestError(\"Failed to send the request.\",o.RestError.REQUEST_SEND_ERROR,i&&i.status,i&&i.request,i)}return i}a.logger.info(`Retrying request in ${u.retryInterval}`);try{await(0,s.delay)(u.retryInterval);const r=await e._nextPolicy.sendRequest(t.clone());return l(e,t,r,u)}catch(E){return l(e,t,i,u,E)}}exports.ExponentialRetryPolicy=R;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":20}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":35}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":43}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":56}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":57}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":64}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":68}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":76}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":86}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":94}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":117}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":125}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":150}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":152}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":160}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":203,"column":0},"generated":{"line":1,"column":183}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":185}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":189}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":191}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":193}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":201}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":220}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":222}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":230}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":268}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":270}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":278}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":299}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":301}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":309}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":325}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":327}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":335}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":355}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":357}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":365}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":33,"column":6},"generated":{"line":1,"column":375}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":33,"column":16},"generated":{"line":1,"column":384}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":34,"column":2},"generated":{"line":1,"column":386}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":35,"column":2},"generated":{"line":1,"column":388}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":390}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":38,"column":2},"generated":{"line":1,"column":393}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":38,"column":9},"generated":{"line":1,"column":399}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":1,"column":400}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":39,"column":12},"generated":{"line":1,"column":407}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":39,"column":13},"generated":{"line":1,"column":408}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":39,"column":40},"generated":{"line":1,"column":410}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":40,"column":13},"generated":{"line":1,"column":414}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":40,"column":17},"generated":{"line":1,"column":418}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":41,"column":8},"generated":{"line":1,"column":420}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":422}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":424}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":426}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":1,"column":428}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":60,"column":1},"generated":{"line":1,"column":432}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":60,"column":1},"generated":{"line":1,"column":440}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":60,"column":1},"generated":{"line":1,"column":450}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":54,"column":0},"generated":{"line":1,"column":452}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":461}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":1,"column":464}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":1,"column":466}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":1,"column":468}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":1,"column":480}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":1,"column":483}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":54,"column":0},"generated":{"line":1,"column":497}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":498}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":502}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":510}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":520}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":54,"column":21},"generated":{"line":1,"column":522}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":90,"column":7},"generated":{"line":1,"column":527}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":90,"column":13},"generated":{"line":1,"column":533}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":90,"column":49},"generated":{"line":1,"column":535}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":91,"column":2},"generated":{"line":1,"column":536}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":91,"column":14},"generated":{"line":1,"column":547}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":91,"column":40},"generated":{"line":1,"column":549}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":1,"column":576}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":92,"column":18},"generated":{"line":1,"column":591}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":92,"column":47},"generated":{"line":1,"column":593}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":93,"column":2},"generated":{"line":1,"column":623}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":93,"column":21},"generated":{"line":1,"column":641}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":93,"column":21},"generated":{"line":1,"column":643}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":678}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":686}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":706}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":99,"column":6},"generated":{"line":1,"column":708}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":99,"column":13},"generated":{"line":1,"column":714}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":99,"column":44},"generated":{"line":1,"column":724}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":99,"column":61},"generated":{"line":1,"column":726}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":121,"column":2},"generated":{"line":1,"column":744}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":122,"column":4},"generated":{"line":1,"column":756}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":123,"column":4},"generated":{"line":1,"column":758}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":124,"column":4},"generated":{"line":1,"column":760}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":125,"column":4},"generated":{"line":1,"column":762}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":126,"column":4},"generated":{"line":1,"column":764}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":128,"column":4},"generated":{"line":1,"column":767}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":128,"column":10},"generated":{"line":1,"column":773}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":128,"column":22},"generated":{"line":1,"column":775}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":129,"column":4},"generated":{"line":1,"column":778}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":129,"column":9},"generated":{"line":1,"column":783}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":129,"column":22},"generated":{"line":1,"column":795}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":129,"column":22},"generated":{"line":1,"column":797}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":129,"column":30},"generated":{"line":1,"column":799}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":129,"column":31},"generated":{"line":1,"column":809}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":129,"column":45},"generated":{"line":1,"column":812}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":129,"column":58},"generated":{"line":1,"column":814}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":129,"column":84},"generated":{"line":1,"column":816}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":130,"column":4},"generated":{"line":1,"column":843}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":130,"column":9},"generated":{"line":1,"column":848}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":130,"column":25},"generated":{"line":1,"column":863}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":130,"column":25},"generated":{"line":1,"column":865}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":130,"column":33},"generated":{"line":1,"column":867}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":130,"column":34},"generated":{"line":1,"column":877}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":130,"column":51},"generated":{"line":1,"column":880}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":130,"column":67},"generated":{"line":1,"column":882}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":130,"column":96},"generated":{"line":1,"column":884}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":131,"column":4},"generated":{"line":1,"column":914}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":131,"column":9},"generated":{"line":1,"column":919}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":131,"column":28},"generated":{"line":1,"column":937}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":131,"column":28},"generated":{"line":1,"column":939}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":131,"column":36},"generated":{"line":1,"column":941}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":131,"column":37},"generated":{"line":1,"column":951}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":132,"column":8},"generated":{"line":1,"column":954}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":133,"column":8},"generated":{"line":1,"column":956}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":133,"column":41},"generated":{"line":1,"column":958}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":136,"column":9},"generated":{"line":1,"column":992}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":136,"column":21},"generated":{"line":1,"column":1004}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":137,"column":4},"generated":{"line":1,"column":1007}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":137,"column":11},"generated":{"line":1,"column":1014}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":137,"column":16},"generated":{"line":1,"column":1019}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":138,"column":7},"generated":{"line":1,"column":1031}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":138,"column":19},"generated":{"line":1,"column":1043}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":138,"column":27},"generated":{"line":1,"column":1045}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":139,"column":7},"generated":{"line":1,"column":1054}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":139,"column":13},"generated":{"line":1,"column":1059}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":139,"column":26},"generated":{"line":1,"column":1062}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":139,"column":32},"generated":{"line":1,"column":1064}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":139,"column":38},"generated":{"line":1,"column":1069}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":139,"column":47},"generated":{"line":1,"column":1071}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":140,"column":7},"generated":{"line":1,"column":1075}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":140,"column":14},"generated":{"line":1,"column":1081}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":140,"column":24},"generated":{"line":1,"column":1084}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":140,"column":30},"generated":{"line":1,"column":1086}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":140,"column":36},"generated":{"line":1,"column":1091}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":140,"column":45},"generated":{"line":1,"column":1093}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":140,"column":51},"generated":{"line":1,"column":1095}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":140,"column":61},"generated":{"line":1,"column":1109}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":140,"column":72},"generated":{"line":1,"column":1111}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":144,"column":0},"generated":{"line":1,"column":1116}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":144,"column":15},"generated":{"line":1,"column":1131}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":145,"column":2},"generated":{"line":1,"column":1133}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":146,"column":2},"generated":{"line":1,"column":1135}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":147,"column":2},"generated":{"line":1,"column":1137}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":148,"column":2},"generated":{"line":1,"column":1139}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":1,"column":1141}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":168,"column":2},"generated":{"line":1,"column":1144}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":168,"column":14},"generated":{"line":1,"column":1147}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":168,"column":14},"generated":{"line":1,"column":1149}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":168,"column":29},"generated":{"line":1,"column":1151}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":169,"column":4},"generated":{"line":1,"column":1168}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":170,"column":6},"generated":{"line":1,"column":1169}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":170,"column":21},"generated":{"line":1,"column":1183}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":170,"column":28},"generated":{"line":1,"column":1185}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":171,"column":6},"generated":{"line":1,"column":1199}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":171,"column":24},"generated":{"line":1,"column":1216}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":172,"column":6},"generated":{"line":1,"column":1218}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":172,"column":24},"generated":{"line":1,"column":1235}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":172,"column":31},"generated":{"line":1,"column":1237}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":174,"column":4},"generated":{"line":1,"column":1255}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":175,"column":4},"generated":{"line":1,"column":1257}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":178,"column":2},"generated":{"line":1,"column":1260}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":178,"column":8},"generated":{"line":1,"column":1266}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":178,"column":41},"generated":{"line":1,"column":1268}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":178,"column":49},"generated":{"line":1,"column":1270}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":178,"column":64},"generated":{"line":1,"column":1283}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":178,"column":72},"generated":{"line":1,"column":1285}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":178,"column":84},"generated":{"line":1,"column":1297}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":179,"column":2},"generated":{"line":1,"column":1305}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":179,"column":7},"generated":{"line":1,"column":1308}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":179,"column":20},"generated":{"line":1,"column":1313}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":179,"column":20},"generated":{"line":1,"column":1315}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":179,"column":31},"generated":{"line":1,"column":1317}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":179,"column":32},"generated":{"line":1,"column":1330}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":179,"column":39},"generated":{"line":1,"column":1332}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":151,"column":2},"generated":{"line":1,"column":1343}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":151,"column":29},"generated":{"line":1,"column":1352}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":152,"column":4},"generated":{"line":1,"column":1355}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":152,"column":10},"generated":{"line":1,"column":1361}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":152,"column":23},"generated":{"line":1,"column":1363}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":152,"column":23},"generated":{"line":1,"column":1369}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":152,"column":36},"generated":{"line":1,"column":1376}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":152,"column":23},"generated":{"line":1,"column":1378}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":152,"column":38},"generated":{"line":1,"column":1380}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":4},"generated":{"line":1,"column":1387}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":23},"generated":{"line":1,"column":1395}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":8},"generated":{"line":1,"column":1401}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":30},"generated":{"line":1,"column":1404}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":30},"generated":{"line":1,"column":1410}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":30},"generated":{"line":1,"column":1413}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":40},"generated":{"line":1,"column":1415}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":48},"generated":{"line":1,"column":1423}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":52},"generated":{"line":1,"column":1427}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":61},"generated":{"line":1,"column":1429}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":62},"generated":{"line":1,"column":1439}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":153,"column":78},"generated":{"line":1,"column":1455}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":158,"column":21},"generated":{"line":1,"column":1474}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":158,"column":6},"generated":{"line":1,"column":1478}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":159,"column":7},"generated":{"line":1,"column":1481}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":159,"column":20},"generated":{"line":1,"column":1483}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":159,"column":42},"generated":{"line":1,"column":1488}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":159,"column":27},"generated":{"line":1,"column":1494}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":160,"column":21},"generated":{"line":1,"column":1497}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":160,"column":6},"generated":{"line":1,"column":1503}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":161,"column":21},"generated":{"line":1,"column":1506}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":161,"column":6},"generated":{"line":1,"column":1512}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":179,"column":70},"generated":{"line":1,"column":1516}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":179,"column":81},"generated":{"line":1,"column":1518}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":188,"column":9},"generated":{"line":1,"column":1521}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":188,"column":9},"generated":{"line":1,"column":1522}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":188,"column":13},"generated":{"line":1,"column":1525}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":188,"column":26},"generated":{"line":1,"column":1528}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":188,"column":43},"generated":{"line":1,"column":1532}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":188,"column":53},"generated":{"line":1,"column":1534}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":199,"column":4},"generated":{"line":1,"column":1535}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":191,"column":6},"generated":{"line":1,"column":1541}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":191,"column":16},"generated":{"line":1,"column":1543}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":192,"column":6},"generated":{"line":1,"column":1550}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":192,"column":10},"generated":{"line":1,"column":1554}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":192,"column":19},"generated":{"line":1,"column":1556}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":193,"column":8},"generated":{"line":1,"column":1566}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":194,"column":8},"generated":{"line":1,"column":1596}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":194,"column":17},"generated":{"line":1,"column":1598}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":194,"column":18},"generated":{"line":1,"column":1608}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":195,"column":8},"generated":{"line":1,"column":1627}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":195,"column":20},"generated":{"line":1,"column":1630}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":195,"column":29},"generated":{"line":1,"column":1632}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":196,"column":8},"generated":{"line":1,"column":1639}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":196,"column":20},"generated":{"line":1,"column":1642}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":196,"column":29},"generated":{"line":1,"column":1644}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":197,"column":8},"generated":{"line":1,"column":1652}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":201,"column":4},"generated":{"line":1,"column":1655}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":201,"column":11},"generated":{"line":1,"column":1662}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":180,"column":4},"generated":{"line":1,"column":1664}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":180,"column":10},"generated":{"line":1,"column":1666}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":180,"column":11},"generated":{"line":1,"column":1673}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":180,"column":39},"generated":{"line":1,"column":1701}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":180,"column":49},"generated":{"line":1,"column":1703}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":181,"column":4},"generated":{"line":1,"column":1720}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":182,"column":12},"generated":{"line":1,"column":1730}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":182,"column":12},"generated":{"line":1,"column":1732}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":182,"column":17},"generated":{"line":1,"column":1734}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":182,"column":18},"generated":{"line":1,"column":1741}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":182,"column":28},"generated":{"line":1,"column":1743}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":183,"column":6},"generated":{"line":1,"column":1758}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":183,"column":12},"generated":{"line":1,"column":1764}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":183,"column":24},"generated":{"line":1,"column":1772}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":183,"column":31},"generated":{"line":1,"column":1774}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":183,"column":43},"generated":{"line":1,"column":1786}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":183,"column":55},"generated":{"line":1,"column":1798}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":183,"column":63},"generated":{"line":1,"column":1800}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":184,"column":6},"generated":{"line":1,"column":1809}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":184,"column":13},"generated":{"line":1,"column":1816}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":184,"column":19},"generated":{"line":1,"column":1818}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":184,"column":27},"generated":{"line":1,"column":1820}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":184,"column":36},"generated":{"line":1,"column":1822}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":184,"column":41},"generated":{"line":1,"column":1824}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":185,"column":6},"generated":{"line":1,"column":1827}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":185,"column":13},"generated":{"line":1,"column":1833}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":186,"column":6},"generated":{"line":1,"column":1836}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":186,"column":13},"generated":{"line":1,"column":1843}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":186,"column":19},"generated":{"line":1,"column":1845}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":186,"column":27},"generated":{"line":1,"column":1847}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":186,"column":36},"generated":{"line":1,"column":1849}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":186,"column":46},"generated":{"line":1,"column":1851}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":186,"column":57},"generated":{"line":1,"column":1853}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":142,"column":1},"generated":{"line":1,"column":1857}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":142,"column":1},"generated":{"line":1,"column":1865}},{"source":"../../../src/policies/exponentialRetryPolicy.ts","name":null,"original":{"line":142,"column":1},"generated":{"line":1,"column":1888}}],"sources":{"../../../src/policies/exponentialRetryPolicy.ts":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport {\n  BaseRequestPolicy,\n  RequestPolicy,\n  RequestPolicyFactory,\n  RequestPolicyOptions,\n} from \"./requestPolicy\";\nimport {\n  DEFAULT_CLIENT_MAX_RETRY_INTERVAL,\n  DEFAULT_CLIENT_RETRY_COUNT,\n  DEFAULT_CLIENT_RETRY_INTERVAL,\n  RetryData,\n  RetryError,\n  isNumber,\n  shouldRetry,\n  updateRetryData,\n} from \"../util/exponentialBackoffStrategy\";\nimport { Constants } from \"../util/constants\";\nimport { HttpOperationResponse } from \"../httpOperationResponse\";\nimport { RestError } from \"../restError\";\nimport { WebResourceLike } from \"../webResource\";\nimport { delay } from \"@azure/core-util\";\nimport { logger } from \"../log\";\n\n/**\n * Policy that retries the request as many times as configured for as long as the max retry time interval specified, each retry waiting longer to begin than the last time.\n * @param retryCount - Maximum number of retries.\n * @param retryInterval - Base time between retries.\n * @param maxRetryInterval - Maximum time to wait between retries.\n */\nexport function exponentialRetryPolicy(\n  retryCount?: number,\n  retryInterval?: number,\n  maxRetryInterval?: number\n): RequestPolicyFactory {\n  return {\n    create: (nextPolicy: RequestPolicy, options: RequestPolicyOptions) => {\n      return new ExponentialRetryPolicy(\n        nextPolicy,\n        options,\n        retryCount,\n        retryInterval,\n        maxRetryInterval\n      );\n    },\n  };\n}\n\n/**\n * Describes the Retry Mode type. Currently supporting only Exponential.\n */\nexport enum RetryMode {\n  /**\n   * Currently supported retry mode.\n   * Each time a retry happens, it will take exponentially more time than the last time.\n   */\n  Exponential,\n}\n\n/**\n * Options that control how to retry failed requests.\n */\nexport interface RetryOptions {\n  /**\n   * The maximum number of retry attempts.  Defaults to 3.\n   */\n  maxRetries?: number;\n\n  /**\n   * The amount of delay in milliseconds between retry attempts. Defaults to 30000\n   * (30 seconds). The delay increases exponentially with each retry up to a maximum\n   * specified by maxRetryDelayInMs.\n   */\n  retryDelayInMs?: number;\n\n  /**\n   * The maximum delay in milliseconds allowed before retrying an operation. Defaults\n   * to 90000 (90 seconds).\n   */\n  maxRetryDelayInMs?: number;\n\n  /**\n   * Currently supporting only Exponential mode.\n   */\n  mode?: RetryMode;\n}\n\nexport const DefaultRetryOptions: RetryOptions = {\n  maxRetries: DEFAULT_CLIENT_RETRY_COUNT,\n  retryDelayInMs: DEFAULT_CLIENT_RETRY_INTERVAL,\n  maxRetryDelayInMs: DEFAULT_CLIENT_MAX_RETRY_INTERVAL,\n};\n\n/**\n * Instantiates a new \"ExponentialRetryPolicyFilter\" instance.\n */\nexport class ExponentialRetryPolicy extends BaseRequestPolicy {\n  /**\n   * The client retry count.\n   */\n  retryCount: number;\n  /**\n   * The client retry interval in milliseconds.\n   */\n  retryInterval: number;\n  /**\n   * The maximum retry interval in milliseconds.\n   */\n  maxRetryInterval: number;\n\n  /**\n   * @param nextPolicy - The next RequestPolicy in the pipeline chain.\n   * @param options - The options for this RequestPolicy.\n   * @param retryCount - The client retry count.\n   * @param retryInterval - The client retry interval, in milliseconds.\n   * @param minRetryInterval - The minimum retry interval, in milliseconds.\n   * @param maxRetryInterval - The maximum retry interval, in milliseconds.\n   */\n  constructor(\n    nextPolicy: RequestPolicy,\n    options: RequestPolicyOptions,\n    retryCount?: number,\n    retryInterval?: number,\n    maxRetryInterval?: number\n  ) {\n    super(nextPolicy, options);\n    this.retryCount = isNumber(retryCount) ? retryCount : DEFAULT_CLIENT_RETRY_COUNT;\n    this.retryInterval = isNumber(retryInterval) ? retryInterval : DEFAULT_CLIENT_RETRY_INTERVAL;\n    this.maxRetryInterval = isNumber(maxRetryInterval)\n      ? maxRetryInterval\n      : DEFAULT_CLIENT_MAX_RETRY_INTERVAL;\n  }\n\n  public sendRequest(request: WebResourceLike): Promise<HttpOperationResponse> {\n    return this._nextPolicy\n      .sendRequest(request.clone())\n      .then((response) => retry(this, request, response))\n      .catch((error) => retry(this, request, error.response, undefined, error));\n  }\n}\n\nasync function retry(\n  policy: ExponentialRetryPolicy,\n  request: WebResourceLike,\n  response?: HttpOperationResponse,\n  retryData?: RetryData,\n  requestError?: RetryError\n): Promise<HttpOperationResponse> {\n  function shouldPolicyRetry(responseParam?: HttpOperationResponse): boolean {\n    const statusCode = responseParam?.status;\n    if (statusCode === 503 && response?.headers.get(Constants.HeaderConstants.RETRY_AFTER)) {\n      return false;\n    }\n\n    if (\n      statusCode === undefined ||\n      (statusCode < 500 && statusCode !== 408) ||\n      statusCode === 501 ||\n      statusCode === 505\n    ) {\n      return false;\n    }\n    return true;\n  }\n\n  retryData = updateRetryData(\n    {\n      retryInterval: policy.retryInterval,\n      minRetryInterval: 0,\n      maxRetryInterval: policy.maxRetryInterval,\n    },\n    retryData,\n    requestError\n  );\n\n  const isAborted: boolean | undefined = request.abortSignal && request.abortSignal.aborted;\n  if (!isAborted && shouldRetry(policy.retryCount, shouldPolicyRetry, retryData, response)) {\n    logger.info(`Retrying request in ${retryData.retryInterval}`);\n    try {\n      await delay(retryData.retryInterval);\n      const res = await policy._nextPolicy.sendRequest(request.clone());\n      return retry(policy, request, res, retryData);\n    } catch (err: any) {\n      return retry(policy, request, response, retryData, err);\n    }\n  } else if (isAborted || requestError || !response) {\n    // If the operation failed in the end, return all errors instead of just the last one\n    const err =\n      retryData.error ||\n      new RestError(\n        \"Failed to send the request.\",\n        RestError.REQUEST_SEND_ERROR,\n        response && response.status,\n        response && response.request,\n        response\n      );\n    throw err;\n  } else {\n    return response;\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"b510dd60b9af8b7878319fc479887d93","cacheData":{"env":{}}}