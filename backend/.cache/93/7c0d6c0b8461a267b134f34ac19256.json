{"id":"WaOM","dependencies":[{"name":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-lro\\dist-esm\\src\\legacy\\poller.js.map","includedInParent":true,"mtime":1672192584308},{"name":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\package.json","includedInParent":true,"mtime":1672218648515},{"name":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\core-lro\\package.json","includedInParent":true,"mtime":1672192582132}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.PollerStoppedError=exports.PollerCancelledError=exports.Poller=void 0;class e extends Error{constructor(t){super(t),this.name=\"PollerStoppedError\",Object.setPrototypeOf(this,e.prototype)}}exports.PollerStoppedError=e;class t extends Error{constructor(e){super(e),this.name=\"PollerCancelledError\",Object.setPrototypeOf(this,t.prototype)}}exports.PollerCancelledError=t;class s{constructor(e){this.resolveOnUnsuccessful=!1,this.stopped=!0,this.pollProgressCallbacks=[],this.operation=e,this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.promise.catch(()=>{})}async startPolling(e={}){for(this.stopped&&(this.stopped=!1);!this.isStopped()&&!this.isDone();)await this.poll(e),await this.delay()}async pollOnce(e={}){this.isDone()||(this.operation=await this.operation.update({abortSignal:e.abortSignal,fireProgress:this.fireProgress.bind(this)})),this.processUpdatedState()}fireProgress(e){for(const t of this.pollProgressCallbacks)t(e)}async cancelOnce(e={}){this.operation=await this.operation.cancel(e)}poll(e={}){if(!this.pollOncePromise){this.pollOncePromise=this.pollOnce(e);const t=()=>{this.pollOncePromise=void 0};this.pollOncePromise.then(t,t).catch(this.reject)}return this.pollOncePromise}processUpdatedState(){if(this.operation.state.error&&(this.stopped=!0,!this.resolveOnUnsuccessful))throw this.reject(this.operation.state.error),this.operation.state.error;if(this.operation.state.isCancelled&&(this.stopped=!0,!this.resolveOnUnsuccessful)){const e=new t(\"Operation was canceled\");throw this.reject(e),e}this.isDone()&&this.resolve&&this.resolve(this.getResult())}async pollUntilDone(e={}){return this.stopped&&this.startPolling(e).catch(this.reject),this.processUpdatedState(),this.promise}onProgress(e){return this.pollProgressCallbacks.push(e),()=>{this.pollProgressCallbacks=this.pollProgressCallbacks.filter(t=>t!==e)}}isDone(){const e=this.operation.state;return Boolean(e.isCompleted||e.isCancelled||e.error)}stopPolling(){this.stopped||(this.stopped=!0,this.reject&&this.reject(new e(\"This poller is already stopped\")))}isStopped(){return this.stopped}cancelOperation(e={}){if(this.cancelPromise){if(e.abortSignal)throw new Error(\"A cancel request is currently pending\")}else this.cancelPromise=this.cancelOnce(e);return this.cancelPromise}getOperationState(){return this.operation.state}getResult(){return this.operation.state.result}toString(){return this.operation.toString()}}exports.Poller=s;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":0}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":13}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":20}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":35}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":43}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":56}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":57}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":64}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":68}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":76}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":95}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":103}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":124}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":132}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":144}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":146}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":20,"column":13},"generated":{"line":1,"column":152}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":20,"column":40},"generated":{"line":1,"column":162}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":21,"column":2},"generated":{"line":1,"column":168}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":21,"column":14},"generated":{"line":1,"column":180}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":1,"column":183}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":22,"column":10},"generated":{"line":1,"column":189}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":192}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":23,"column":9},"generated":{"line":1,"column":197}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":23,"column":16},"generated":{"line":1,"column":202}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":24,"column":4},"generated":{"line":1,"column":223}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":24,"column":11},"generated":{"line":1,"column":230}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":24,"column":26},"generated":{"line":1,"column":245}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":24,"column":32},"generated":{"line":1,"column":250}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":24,"column":51},"generated":{"line":1,"column":252}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":264}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":272}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":291}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":293}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":1,"column":299}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":32,"column":42},"generated":{"line":1,"column":309}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":33,"column":2},"generated":{"line":1,"column":315}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":33,"column":14},"generated":{"line":1,"column":327}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":34,"column":4},"generated":{"line":1,"column":330}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":34,"column":10},"generated":{"line":1,"column":336}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":1,"column":339}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":35,"column":9},"generated":{"line":1,"column":344}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":35,"column":16},"generated":{"line":1,"column":349}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":1,"column":372}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":36,"column":11},"generated":{"line":1,"column":379}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":36,"column":26},"generated":{"line":1,"column":394}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":36,"column":32},"generated":{"line":1,"column":399}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":36,"column":53},"generated":{"line":1,"column":401}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":101,"column":0},"generated":{"line":1,"column":413}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":101,"column":0},"generated":{"line":1,"column":421}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":101,"column":0},"generated":{"line":1,"column":442}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":102,"column":6},"generated":{"line":1,"column":444}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":102,"column":22},"generated":{"line":1,"column":450}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":186,"column":2},"generated":{"line":1,"column":452}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":186,"column":14},"generated":{"line":1,"column":464}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":106,"column":12},"generated":{"line":1,"column":467}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":106,"column":12},"generated":{"line":1,"column":472}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":106,"column":45},"generated":{"line":1,"column":495}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":107,"column":10},"generated":{"line":1,"column":497}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":107,"column":10},"generated":{"line":1,"column":502}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":107,"column":29},"generated":{"line":1,"column":511}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":113,"column":10},"generated":{"line":1,"column":513}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":113,"column":10},"generated":{"line":1,"column":518}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":113,"column":66},"generated":{"line":1,"column":540}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":187,"column":4},"generated":{"line":1,"column":543}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":187,"column":9},"generated":{"line":1,"column":548}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":187,"column":21},"generated":{"line":1,"column":558}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":188,"column":4},"generated":{"line":1,"column":560}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":188,"column":9},"generated":{"line":1,"column":565}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":188,"column":19},"generated":{"line":1,"column":573}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":188,"column":23},"generated":{"line":1,"column":577}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":189,"column":6},"generated":{"line":1,"column":585}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":190,"column":8},"generated":{"line":1,"column":586}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":191,"column":8},"generated":{"line":1,"column":588}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":193,"column":8},"generated":{"line":1,"column":593}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":193,"column":13},"generated":{"line":1,"column":598}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":193,"column":23},"generated":{"line":1,"column":606}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":194,"column":8},"generated":{"line":1,"column":608}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":194,"column":13},"generated":{"line":1,"column":613}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":194,"column":22},"generated":{"line":1,"column":620}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":200,"column":4},"generated":{"line":1,"column":624}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":200,"column":9},"generated":{"line":1,"column":629}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":200,"column":17},"generated":{"line":1,"column":637}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":200,"column":23},"generated":{"line":1,"column":643}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":232,"column":10},"generated":{"line":1,"column":651}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":232,"column":29},"generated":{"line":1,"column":670}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":232,"column":78},"generated":{"line":1,"column":672}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":236,"column":4},"generated":{"line":1,"column":676}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":233,"column":8},"generated":{"line":1,"column":680}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":233,"column":13},"generated":{"line":1,"column":685}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":234,"column":6},"generated":{"line":1,"column":695}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":234,"column":11},"generated":{"line":1,"column":700}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":234,"column":21},"generated":{"line":1,"column":709}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":236,"column":12},"generated":{"line":1,"column":713}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":236,"column":17},"generated":{"line":1,"column":718}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":236,"column":33},"generated":{"line":1,"column":732}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":236,"column":38},"generated":{"line":1,"column":737}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":237,"column":12},"generated":{"line":1,"column":753}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":237,"column":17},"generated":{"line":1,"column":758}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":237,"column":22},"generated":{"line":1,"column":763}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":238,"column":12},"generated":{"line":1,"column":772}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":238,"column":17},"generated":{"line":1,"column":777}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":250,"column":10},"generated":{"line":1,"column":785}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":250,"column":25},"generated":{"line":1,"column":800}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":250,"column":70},"generated":{"line":1,"column":802}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":251,"column":9},"generated":{"line":1,"column":806}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":251,"column":14},"generated":{"line":1,"column":811}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":252,"column":6},"generated":{"line":1,"column":822}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":252,"column":11},"generated":{"line":1,"column":827}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":252,"column":29},"generated":{"line":1,"column":843}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":252,"column":34},"generated":{"line":1,"column":848}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":252,"column":44},"generated":{"line":1,"column":858}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":252,"column":51},"generated":{"line":1,"column":865}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":253,"column":8},"generated":{"line":1,"column":866}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":253,"column":21},"generated":{"line":1,"column":878}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":253,"column":29},"generated":{"line":1,"column":880}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":254,"column":8},"generated":{"line":1,"column":892}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":254,"column":22},"generated":{"line":1,"column":905}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":254,"column":27},"generated":{"line":1,"column":910}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":254,"column":40},"generated":{"line":1,"column":923}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":254,"column":45},"generated":{"line":1,"column":928}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":257,"column":4},"generated":{"line":1,"column":937}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":257,"column":9},"generated":{"line":1,"column":942}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":268,"column":10},"generated":{"line":1,"column":964}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":268,"column":23},"generated":{"line":1,"column":977}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":269,"column":4},"generated":{"line":1,"column":980}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":269,"column":9},"generated":{"line":1,"column":984}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":269,"column":15},"generated":{"line":1,"column":990}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":269,"column":27},"generated":{"line":1,"column":995}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":269,"column":32},"generated":{"line":1,"column":1000}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":270,"column":6},"generated":{"line":1,"column":1022}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":270,"column":15},"generated":{"line":1,"column":1024}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":277,"column":10},"generated":{"line":1,"column":1027}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":277,"column":27},"generated":{"line":1,"column":1044}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":277,"column":72},"generated":{"line":1,"column":1046}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":278,"column":4},"generated":{"line":1,"column":1050}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":278,"column":9},"generated":{"line":1,"column":1055}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":278,"column":27},"generated":{"line":1,"column":1071}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":278,"column":32},"generated":{"line":1,"column":1076}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":278,"column":42},"generated":{"line":1,"column":1086}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":278,"column":49},"generated":{"line":1,"column":1093}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":289,"column":9},"generated":{"line":1,"column":1096}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":289,"column":14},"generated":{"line":1,"column":1101}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":289,"column":59},"generated":{"line":1,"column":1103}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":290,"column":4},"generated":{"line":1,"column":1107}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":290,"column":9},"generated":{"line":1,"column":1111}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":290,"column":14},"generated":{"line":1,"column":1116}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":290,"column":31},"generated":{"line":1,"column":1132}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":291,"column":6},"generated":{"line":1,"column":1133}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":291,"column":11},"generated":{"line":1,"column":1138}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":291,"column":29},"generated":{"line":1,"column":1154}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":291,"column":34},"generated":{"line":1,"column":1159}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":291,"column":43},"generated":{"line":1,"column":1168}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":292,"column":6},"generated":{"line":1,"column":1171}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":292,"column":12},"generated":{"line":1,"column":1177}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":292,"column":35},"generated":{"line":1,"column":1179}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":293,"column":8},"generated":{"line":1,"column":1184}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":293,"column":13},"generated":{"line":1,"column":1189}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":293,"column":31},"generated":{"line":1,"column":1210}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":295,"column":6},"generated":{"line":1,"column":1213}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":295,"column":11},"generated":{"line":1,"column":1218}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":295,"column":27},"generated":{"line":1,"column":1234}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":295,"column":32},"generated":{"line":1,"column":1239}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":295,"column":54},"generated":{"line":1,"column":1241}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":295,"column":76},"generated":{"line":1,"column":1244}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":295,"column":82},"generated":{"line":1,"column":1250}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":295,"column":87},"generated":{"line":1,"column":1255}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":297,"column":4},"generated":{"line":1,"column":1263}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":297,"column":11},"generated":{"line":1,"column":1270}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":297,"column":16},"generated":{"line":1,"column":1275}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":300,"column":10},"generated":{"line":1,"column":1291}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":301,"column":4},"generated":{"line":1,"column":1313}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":301,"column":8},"generated":{"line":1,"column":1316}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":301,"column":13},"generated":{"line":1,"column":1321}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":301,"column":23},"generated":{"line":1,"column":1331}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":301,"column":29},"generated":{"line":1,"column":1337}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":302,"column":6},"generated":{"line":1,"column":1345}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":302,"column":11},"generated":{"line":1,"column":1350}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":302,"column":21},"generated":{"line":1,"column":1359}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":303,"column":11},"generated":{"line":1,"column":1362}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":303,"column":16},"generated":{"line":1,"column":1367}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":305,"column":8},"generated":{"line":1,"column":1390}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":304,"column":8},"generated":{"line":1,"column":1396}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":304,"column":13},"generated":{"line":1,"column":1401}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":304,"column":21},"generated":{"line":1,"column":1408}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":304,"column":26},"generated":{"line":1,"column":1413}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":304,"column":36},"generated":{"line":1,"column":1423}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":304,"column":42},"generated":{"line":1,"column":1429}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":305,"column":14},"generated":{"line":1,"column":1436}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":305,"column":19},"generated":{"line":1,"column":1441}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":305,"column":29},"generated":{"line":1,"column":1451}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":305,"column":35},"generated":{"line":1,"column":1457}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":308,"column":4},"generated":{"line":1,"column":1463}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":308,"column":8},"generated":{"line":1,"column":1466}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":308,"column":13},"generated":{"line":1,"column":1471}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":308,"column":23},"generated":{"line":1,"column":1481}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":308,"column":29},"generated":{"line":1,"column":1487}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":309,"column":6},"generated":{"line":1,"column":1501}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":309,"column":11},"generated":{"line":1,"column":1506}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":309,"column":21},"generated":{"line":1,"column":1515}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":310,"column":11},"generated":{"line":1,"column":1518}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":310,"column":16},"generated":{"line":1,"column":1523}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":310,"column":39},"generated":{"line":1,"column":1546}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":311,"column":8},"generated":{"line":1,"column":1547}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":311,"column":14},"generated":{"line":1,"column":1553}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":311,"column":22},"generated":{"line":1,"column":1555}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":311,"column":26},"generated":{"line":1,"column":1559}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":311,"column":47},"generated":{"line":1,"column":1561}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":313,"column":8},"generated":{"line":1,"column":1587}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":312,"column":8},"generated":{"line":1,"column":1593}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":312,"column":13},"generated":{"line":1,"column":1598}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":312,"column":21},"generated":{"line":1,"column":1605}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":313,"column":14},"generated":{"line":1,"column":1608}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":316,"column":8},"generated":{"line":1,"column":1610}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":316,"column":13},"generated":{"line":1,"column":1615}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":316,"column":25},"generated":{"line":1,"column":1625}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":316,"column":30},"generated":{"line":1,"column":1630}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":322,"column":6},"generated":{"line":1,"column":1639}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":322,"column":11},"generated":{"line":1,"column":1644}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":322,"column":19},"generated":{"line":1,"column":1652}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":322,"column":24},"generated":{"line":1,"column":1657}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":329,"column":9},"generated":{"line":1,"column":1670}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":330,"column":4},"generated":{"line":1,"column":1690}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":330,"column":53},"generated":{"line":1,"column":1692}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":338,"column":4},"generated":{"line":1,"column":1696}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":332,"column":8},"generated":{"line":1,"column":1703}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":332,"column":13},"generated":{"line":1,"column":1708}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":333,"column":6},"generated":{"line":1,"column":1717}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":333,"column":11},"generated":{"line":1,"column":1722}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":333,"column":24},"generated":{"line":1,"column":1735}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":333,"column":37},"generated":{"line":1,"column":1738}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":333,"column":43},"generated":{"line":1,"column":1744}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":333,"column":48},"generated":{"line":1,"column":1749}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":337,"column":4},"generated":{"line":1,"column":1757}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":337,"column":9},"generated":{"line":1,"column":1762}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":338,"column":11},"generated":{"line":1,"column":1784}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":338,"column":16},"generated":{"line":1,"column":1789}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":347,"column":9},"generated":{"line":1,"column":1797}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":347,"column":20},"generated":{"line":1,"column":1808}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":349,"column":4},"generated":{"line":1,"column":1811}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":348,"column":4},"generated":{"line":1,"column":1818}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":348,"column":9},"generated":{"line":1,"column":1823}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":348,"column":31},"generated":{"line":1,"column":1845}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":348,"column":36},"generated":{"line":1,"column":1850}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":349,"column":11},"generated":{"line":1,"column":1853}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":350,"column":6},"generated":{"line":1,"column":1858}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":350,"column":11},"generated":{"line":1,"column":1863}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":350,"column":35},"generated":{"line":1,"column":1885}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":350,"column":40},"generated":{"line":1,"column":1890}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":350,"column":62},"generated":{"line":1,"column":1912}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":350,"column":70},"generated":{"line":1,"column":1919}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":350,"column":76},"generated":{"line":1,"column":1922}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":350,"column":82},"generated":{"line":1,"column":1926}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":357,"column":9},"generated":{"line":1,"column":1930}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":358,"column":4},"generated":{"line":1,"column":1939}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":358,"column":10},"generated":{"line":1,"column":1945}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":358,"column":47},"generated":{"line":1,"column":1947}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":358,"column":52},"generated":{"line":1,"column":1952}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":358,"column":62},"generated":{"line":1,"column":1962}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":359,"column":4},"generated":{"line":1,"column":1968}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":359,"column":11},"generated":{"line":1,"column":1975}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":359,"column":19},"generated":{"line":1,"column":1983}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":359,"column":25},"generated":{"line":1,"column":1985}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":359,"column":40},"generated":{"line":1,"column":1998}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":359,"column":46},"generated":{"line":1,"column":2000}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":359,"column":61},"generated":{"line":1,"column":2013}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":359,"column":67},"generated":{"line":1,"column":2015}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":365,"column":9},"generated":{"line":1,"column":2022}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":366,"column":9},"generated":{"line":1,"column":2036}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":366,"column":14},"generated":{"line":1,"column":2041}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":367,"column":6},"generated":{"line":1,"column":2051}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":367,"column":11},"generated":{"line":1,"column":2056}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":367,"column":21},"generated":{"line":1,"column":2065}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":368,"column":10},"generated":{"line":1,"column":2067}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":368,"column":15},"generated":{"line":1,"column":2072}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":369,"column":8},"generated":{"line":1,"column":2080}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":369,"column":13},"generated":{"line":1,"column":2085}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":369,"column":20},"generated":{"line":1,"column":2092}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":369,"column":24},"generated":{"line":1,"column":2096}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":369,"column":43},"generated":{"line":1,"column":2098}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":377,"column":9},"generated":{"line":1,"column":2134}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":378,"column":4},"generated":{"line":1,"column":2146}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":378,"column":11},"generated":{"line":1,"column":2153}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":378,"column":16},"generated":{"line":1,"column":2158}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":390,"column":9},"generated":{"line":1,"column":2166}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":390,"column":25},"generated":{"line":1,"column":2182}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":390,"column":70},"generated":{"line":1,"column":2184}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":391,"column":4},"generated":{"line":1,"column":2188}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":391,"column":9},"generated":{"line":1,"column":2191}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":391,"column":14},"generated":{"line":1,"column":2196}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":393,"column":11},"generated":{"line":1,"column":2211}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":393,"column":15},"generated":{"line":1,"column":2214}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":393,"column":23},"generated":{"line":1,"column":2216}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":394,"column":6},"generated":{"line":1,"column":2228}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":394,"column":12},"generated":{"line":1,"column":2234}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":394,"column":16},"generated":{"line":1,"column":2238}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":394,"column":22},"generated":{"line":1,"column":2244}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":392,"column":6},"generated":{"line":1,"column":2290}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":392,"column":11},"generated":{"line":1,"column":2295}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":392,"column":27},"generated":{"line":1,"column":2309}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":392,"column":32},"generated":{"line":1,"column":2314}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":392,"column":43},"generated":{"line":1,"column":2325}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":396,"column":4},"generated":{"line":1,"column":2328}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":396,"column":11},"generated":{"line":1,"column":2335}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":396,"column":16},"generated":{"line":1,"column":2340}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":447,"column":9},"generated":{"line":1,"column":2354}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":448,"column":4},"generated":{"line":1,"column":2374}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":448,"column":11},"generated":{"line":1,"column":2381}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":448,"column":16},"generated":{"line":1,"column":2386}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":448,"column":26},"generated":{"line":1,"column":2396}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":457,"column":9},"generated":{"line":1,"column":2402}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":459,"column":4},"generated":{"line":1,"column":2414}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":458,"column":47},"generated":{"line":1,"column":2421}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":458,"column":52},"generated":{"line":1,"column":2426}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":458,"column":62},"generated":{"line":1,"column":2436}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":459,"column":17},"generated":{"line":1,"column":2442}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":466,"column":9},"generated":{"line":1,"column":2449}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":467,"column":4},"generated":{"line":1,"column":2460}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":467,"column":11},"generated":{"line":1,"column":2467}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":467,"column":16},"generated":{"line":1,"column":2472}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":467,"column":26},"generated":{"line":1,"column":2482}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":2494}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":2502}},{"source":"../../../src/legacy/poller.ts","name":null,"original":{"line":469,"column":1},"generated":{"line":1,"column":2509}}],"sources":{"../../../src/legacy/poller.ts":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport { PollOperation, PollOperationState } from \"./pollOperation\";\nimport { AbortSignalLike } from \"@azure/abort-controller\";\nimport { CancelOnProgress } from \"../poller/models\";\nimport { PollerLike } from \"./models\";\n\n/**\n * PollProgressCallback<TState> is the type of the callback functions sent to onProgress.\n * These functions will receive a TState that is defined by your implementation of\n * the Poller class.\n */\nexport type PollProgressCallback<TState> = (state: TState) => void;\n\n/**\n * When a poller is manually stopped through the `stopPolling` method,\n * the poller will be rejected with an instance of the PollerStoppedError.\n */\nexport class PollerStoppedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = \"PollerStoppedError\";\n    Object.setPrototypeOf(this, PollerStoppedError.prototype);\n  }\n}\n\n/**\n * When the operation is cancelled, the poller will be rejected with an instance\n * of the PollerCancelledError.\n */\nexport class PollerCancelledError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = \"PollerCancelledError\";\n    Object.setPrototypeOf(this, PollerCancelledError.prototype);\n  }\n}\n\n/**\n * A class that represents the definition of a program that polls through consecutive requests\n * until it reaches a state of completion.\n *\n * A poller can be executed manually, by polling request by request by calling to the `poll()` method repeatedly, until its operation is completed.\n * It also provides a way to wait until the operation completes, by calling `pollUntilDone()` and waiting until the operation finishes.\n * Pollers can also request the cancellation of the ongoing process to whom is providing the underlying long running operation.\n *\n * ```ts\n * const poller = new MyPoller();\n *\n * // Polling just once:\n * await poller.poll();\n *\n * // We can try to cancel the request here, by calling:\n * //\n * //     await poller.cancelOperation();\n * //\n *\n * // Getting the final result:\n * const result = await poller.pollUntilDone();\n * ```\n *\n * The Poller is defined by two types, a type representing the state of the poller, which\n * must include a basic set of properties from `PollOperationState<TResult>`,\n * and a return type defined by `TResult`, which can be anything.\n *\n * The Poller class implements the `PollerLike` interface, which allows poller implementations to avoid having\n * to export the Poller's class directly, and instead only export the already instantiated poller with the PollerLike type.\n *\n * ```ts\n * class Client {\n *   public async makePoller: PollerLike<MyOperationState, MyResult> {\n *     const poller = new MyPoller({});\n *     // It might be preferred to return the poller after the first request is made,\n *     // so that some information can be obtained right away.\n *     await poller.poll();\n *     return poller;\n *   }\n * }\n *\n * const poller: PollerLike<MyOperationState, MyResult> = myClient.makePoller();\n * ```\n *\n * A poller can be created through its constructor, then it can be polled until it's completed.\n * At any point in time, the state of the poller can be obtained without delay through the getOperationState method.\n * At any point in time, the intermediate forms of the result type can be requested without delay.\n * Once the underlying operation is marked as completed, the poller will stop and the final value will be returned.\n *\n * ```ts\n * const poller = myClient.makePoller();\n * const state: MyOperationState = poller.getOperationState();\n *\n * // The intermediate result can be obtained at any time.\n * const result: MyResult | undefined = poller.getResult();\n *\n * // The final result can only be obtained after the poller finishes.\n * const result: MyResult = await poller.pollUntilDone();\n * ```\n *\n */\n// eslint-disable-next-line no-use-before-define\nexport abstract class Poller<TState extends PollOperationState<TResult>, TResult>\n  implements PollerLike<TState, TResult>\n{\n  /** controls whether to throw an error if the operation failed or was canceled. */\n  protected resolveOnUnsuccessful: boolean = false;\n  private stopped: boolean = true;\n  private resolve?: (value: TResult) => void;\n  private reject?: (error: PollerStoppedError | PollerCancelledError | Error) => void;\n  private pollOncePromise?: Promise<void>;\n  private cancelPromise?: Promise<void>;\n  private promise: Promise<TResult>;\n  private pollProgressCallbacks: PollProgressCallback<TState>[] = [];\n\n  /**\n   * The poller's operation is available in full to any of the methods of the Poller class\n   * and any class extending the Poller class.\n   */\n  protected operation: PollOperation<TState, TResult>;\n\n  /**\n   * A poller needs to be initialized by passing in at least the basic properties of the `PollOperation<TState, TResult>`.\n   *\n   * When writing an implementation of a Poller, this implementation needs to deal with the initialization\n   * of any custom state beyond the basic definition of the poller. The basic poller assumes that the poller's\n   * operation has already been defined, at least its basic properties. The code below shows how to approach\n   * the definition of the constructor of a new custom poller.\n   *\n   * ```ts\n   * export class MyPoller extends Poller<MyOperationState, string> {\n   *   constructor({\n   *     // Anything you might need outside of the basics\n   *   }) {\n   *     let state: MyOperationState = {\n   *       privateProperty: private,\n   *       publicProperty: public,\n   *     };\n   *\n   *     const operation = {\n   *       state,\n   *       update,\n   *       cancel,\n   *       toString\n   *     }\n   *\n   *     // Sending the operation to the parent's constructor.\n   *     super(operation);\n   *\n   *     // You can assign more local properties here.\n   *   }\n   * }\n   * ```\n   *\n   * Inside of this constructor, a new promise is created. This will be used to\n   * tell the user when the poller finishes (see `pollUntilDone()`). The promise's\n   * resolve and reject methods are also used internally to control when to resolve\n   * or reject anyone waiting for the poller to finish.\n   *\n   * The constructor of a custom implementation of a poller is where any serialized version of\n   * a previous poller's operation should be deserialized into the operation sent to the\n   * base constructor. For example:\n   *\n   * ```ts\n   * export class MyPoller extends Poller<MyOperationState, string> {\n   *   constructor(\n   *     baseOperation: string | undefined\n   *   ) {\n   *     let state: MyOperationState = {};\n   *     if (baseOperation) {\n   *       state = {\n   *         ...JSON.parse(baseOperation).state,\n   *         ...state\n   *       };\n   *     }\n   *     const operation = {\n   *       state,\n   *       // ...\n   *     }\n   *     super(operation);\n   *   }\n   * }\n   * ```\n   *\n   * @param operation - Must contain the basic properties of `PollOperation<State, TResult>`.\n   */\n  constructor(operation: PollOperation<TState, TResult>) {\n    this.operation = operation;\n    this.promise = new Promise<TResult>(\n      (\n        resolve: (result: TResult) => void,\n        reject: (error: PollerStoppedError | PollerCancelledError | Error) => void\n      ) => {\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n    );\n    // This prevents the UnhandledPromiseRejectionWarning in node.js from being thrown.\n    // The above warning would get thrown if `poller.poll` is called, it returns an error,\n    // and pullUntilDone did not have a .catch or await try/catch on it's return value.\n    this.promise.catch(() => {\n      /* intentionally blank */\n    });\n  }\n\n  /**\n   * Defines how much to wait between each poll request.\n   * This has to be implemented by your custom poller.\n   *\n   * \\@azure/core-util has a simple implementation of a delay function that waits as many milliseconds as specified.\n   * This can be used as follows:\n   *\n   * ```ts\n   * import { delay } from \"@azure/core-util\";\n   *\n   * export class MyPoller extends Poller<MyOperationState, string> {\n   *   // The other necessary definitions.\n   *\n   *   async delay(): Promise<void> {\n   *     const milliseconds = 1000;\n   *     return delay(milliseconds);\n   *   }\n   * }\n   * ```\n   *\n   */\n  protected abstract delay(): Promise<void>;\n\n  /**\n   * Starts a loop that will break only if the poller is done\n   * or if the poller is stopped.\n   */\n  private async startPolling(pollOptions: { abortSignal?: AbortSignalLike } = {}): Promise<void> {\n    if (this.stopped) {\n      this.stopped = false;\n    }\n    while (!this.isStopped() && !this.isDone()) {\n      await this.poll(pollOptions);\n      await this.delay();\n    }\n  }\n\n  /**\n   * pollOnce does one polling, by calling to the update method of the underlying\n   * poll operation to make any relevant change effective.\n   *\n   * It only optionally receives an object with an abortSignal property, from \\@azure/abort-controller's AbortSignalLike.\n   *\n   * @param options - Optional properties passed to the operation's update method.\n   */\n  private async pollOnce(options: { abortSignal?: AbortSignalLike } = {}): Promise<void> {\n    if (!this.isDone()) {\n      this.operation = await this.operation.update({\n        abortSignal: options.abortSignal,\n        fireProgress: this.fireProgress.bind(this),\n      });\n    }\n    this.processUpdatedState();\n  }\n\n  /**\n   * fireProgress calls the functions passed in via onProgress the method of the poller.\n   *\n   * It loops over all of the callbacks received from onProgress, and executes them, sending them\n   * the current operation state.\n   *\n   * @param state - The current operation state.\n   */\n  private fireProgress(state: TState): void {\n    for (const callback of this.pollProgressCallbacks) {\n      callback(state);\n    }\n  }\n\n  /**\n   * Invokes the underlying operation's cancel method.\n   */\n  private async cancelOnce(options: { abortSignal?: AbortSignalLike } = {}): Promise<void> {\n    this.operation = await this.operation.cancel(options);\n  }\n\n  /**\n   * Returns a promise that will resolve once a single polling request finishes.\n   * It does this by calling the update method of the Poller's operation.\n   *\n   * It only optionally receives an object with an abortSignal property, from \\@azure/abort-controller's AbortSignalLike.\n   *\n   * @param options - Optional properties passed to the operation's update method.\n   */\n  public poll(options: { abortSignal?: AbortSignalLike } = {}): Promise<void> {\n    if (!this.pollOncePromise) {\n      this.pollOncePromise = this.pollOnce(options);\n      const clearPollOncePromise = (): void => {\n        this.pollOncePromise = undefined;\n      };\n      this.pollOncePromise.then(clearPollOncePromise, clearPollOncePromise).catch(this.reject);\n    }\n    return this.pollOncePromise;\n  }\n\n  private processUpdatedState(): void {\n    if (this.operation.state.error) {\n      this.stopped = true;\n      if (!this.resolveOnUnsuccessful) {\n        this.reject!(this.operation.state.error);\n        throw this.operation.state.error;\n      }\n    }\n    if (this.operation.state.isCancelled) {\n      this.stopped = true;\n      if (!this.resolveOnUnsuccessful) {\n        const error = new PollerCancelledError(\"Operation was canceled\");\n        this.reject!(error);\n        throw error;\n      }\n    }\n    if (this.isDone() && this.resolve) {\n      // If the poller has finished polling, this means we now have a result.\n      // However, it can be the case that TResult is instantiated to void, so\n      // we are not expecting a result anyway. To assert that we might not\n      // have a result eventually after finishing polling, we cast the result\n      // to TResult.\n      this.resolve(this.getResult() as TResult);\n    }\n  }\n\n  /**\n   * Returns a promise that will resolve once the underlying operation is completed.\n   */\n  public async pollUntilDone(\n    pollOptions: { abortSignal?: AbortSignalLike } = {}\n  ): Promise<TResult> {\n    if (this.stopped) {\n      this.startPolling(pollOptions).catch(this.reject);\n    }\n    // This is needed because the state could have been updated by\n    // `cancelOperation`, e.g. the operation is canceled or an error occurred.\n    this.processUpdatedState();\n    return this.promise;\n  }\n\n  /**\n   * Invokes the provided callback after each polling is completed,\n   * sending the current state of the poller's operation.\n   *\n   * It returns a method that can be used to stop receiving updates on the given callback function.\n   */\n  public onProgress(callback: (state: TState) => void): CancelOnProgress {\n    this.pollProgressCallbacks.push(callback);\n    return (): void => {\n      this.pollProgressCallbacks = this.pollProgressCallbacks.filter((c) => c !== callback);\n    };\n  }\n\n  /**\n   * Returns true if the poller has finished polling.\n   */\n  public isDone(): boolean {\n    const state: PollOperationState<TResult> = this.operation.state;\n    return Boolean(state.isCompleted || state.isCancelled || state.error);\n  }\n\n  /**\n   * Stops the poller from continuing to poll.\n   */\n  public stopPolling(): void {\n    if (!this.stopped) {\n      this.stopped = true;\n      if (this.reject) {\n        this.reject(new PollerStoppedError(\"This poller is already stopped\"));\n      }\n    }\n  }\n\n  /**\n   * Returns true if the poller is stopped.\n   */\n  public isStopped(): boolean {\n    return this.stopped;\n  }\n\n  /**\n   * Attempts to cancel the underlying operation.\n   *\n   * It only optionally receives an object with an abortSignal property, from \\@azure/abort-controller's AbortSignalLike.\n   *\n   * If it's called again before it finishes, it will throw an error.\n   *\n   * @param options - Optional properties passed to the operation's update method.\n   */\n  public cancelOperation(options: { abortSignal?: AbortSignalLike } = {}): Promise<void> {\n    if (!this.cancelPromise) {\n      this.cancelPromise = this.cancelOnce(options);\n    } else if (options.abortSignal) {\n      throw new Error(\"A cancel request is currently pending\");\n    }\n    return this.cancelPromise;\n  }\n\n  /**\n   * Returns the state of the operation.\n   *\n   * Even though TState will be the same type inside any of the methods of any extension of the Poller class,\n   * implementations of the pollers can customize what's shared with the public by writing their own\n   * version of the `getOperationState` method, and by defining two types, one representing the internal state of the poller\n   * and a public type representing a safe to share subset of the properties of the internal state.\n   * Their definition of getOperationState can then return their public type.\n   *\n   * Example:\n   *\n   * ```ts\n   * // Let's say we have our poller's operation state defined as:\n   * interface MyOperationState extends PollOperationState<ResultType> {\n   *   privateProperty?: string;\n   *   publicProperty?: string;\n   * }\n   *\n   * // To allow us to have a true separation of public and private state, we have to define another interface:\n   * interface PublicState extends PollOperationState<ResultType> {\n   *   publicProperty?: string;\n   * }\n   *\n   * // Then, we define our Poller as follows:\n   * export class MyPoller extends Poller<MyOperationState, ResultType> {\n   *   // ... More content is needed here ...\n   *\n   *   public getOperationState(): PublicState {\n   *     const state: PublicState = this.operation.state;\n   *     return {\n   *       // Properties from PollOperationState<TResult>\n   *       isStarted: state.isStarted,\n   *       isCompleted: state.isCompleted,\n   *       isCancelled: state.isCancelled,\n   *       error: state.error,\n   *       result: state.result,\n   *\n   *       // The only other property needed by PublicState.\n   *       publicProperty: state.publicProperty\n   *     }\n   *   }\n   * }\n   * ```\n   *\n   * You can see this in the tests of this repository, go to the file:\n   * `../test/utils/testPoller.ts`\n   * and look for the getOperationState implementation.\n   */\n  public getOperationState(): TState {\n    return this.operation.state;\n  }\n\n  /**\n   * Returns the result value of the operation,\n   * regardless of the state of the poller.\n   * It can return undefined or an incomplete form of the final TResult value\n   * depending on the implementation.\n   */\n  public getResult(): TResult | undefined {\n    const state: PollOperationState<TResult> = this.operation.state;\n    return state.result;\n  }\n\n  /**\n   * Returns a serialized version of the poller's operation\n   * by invoking the operation's toString method.\n   */\n  public toString(): string {\n    return this.operation.toString();\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"83d71bc839a1b54be3834561d0094bff","cacheData":{"env":{}}}