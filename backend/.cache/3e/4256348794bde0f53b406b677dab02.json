{"id":"syBq","dependencies":[{"name":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\storage-blob\\dist-esm\\storage-blob\\src\\utils\\Mutex.js.map","includedInParent":true,"mtime":1672192599967},{"name":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\package.json","includedInParent":true,"mtime":1672218648515},{"name":"C:\\Users\\ACC\\Desktop\\APH\\Acitizen-Pasco-Hub\\backend\\node_modules\\@azure\\storage-blob\\package.json","includedInParent":true,"mtime":1672192591436}],"generated":{"js":"\"use strict\";var s;Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Mutex=void 0,function(s){s[s.LOCKED=0]=\"LOCKED\",s[s.UNLOCKED=1]=\"UNLOCKED\"}(s||(s={}));class t{static async lock(t){return new Promise(e=>{void 0===this.keys[t]||this.keys[t]===s.UNLOCKED?(this.keys[t]=s.LOCKED,e()):this.onUnlockEvent(t,()=>{this.keys[t]=s.LOCKED,e()})})}static async unlock(t){return new Promise(e=>{this.keys[t]===s.LOCKED&&this.emitUnlockEvent(t),delete this.keys[t],e()})}static onUnlockEvent(s,t){void 0===this.listeners[s]?this.listeners[s]=[t]:this.listeners[s].push(t)}static emitUnlockEvent(s){if(void 0!==this.listeners[s]&&this.listeners[s].length>0){const t=this.listeners[s].shift();setImmediate(()=>{t.call(this)})}}}exports.Mutex=t,t.keys={},t.listeners={};"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":0}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":4,"column":5},"generated":{"line":1,"column":17}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":19}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":26}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":41}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":49}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":62}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":63}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":70}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":74}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":82}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":93}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":95}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":4,"column":5},"generated":{"line":1,"column":104}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":5,"column":2},"generated":{"line":1,"column":107}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":5,"column":2},"generated":{"line":1,"column":109}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":5,"column":2},"generated":{"line":1,"column":111}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":5,"column":2},"generated":{"line":1,"column":118}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":5,"column":2},"generated":{"line":1,"column":121}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":6,"column":2},"generated":{"line":1,"column":130}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":6,"column":2},"generated":{"line":1,"column":132}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":6,"column":2},"generated":{"line":1,"column":134}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":6,"column":2},"generated":{"line":1,"column":143}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":6,"column":2},"generated":{"line":1,"column":146}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":157}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":4,"column":5},"generated":{"line":1,"column":158}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":4,"column":5},"generated":{"line":1,"column":162}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":4,"column":20},"generated":{"line":1,"column":164}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":14,"column":6},"generated":{"line":1,"column":169}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":14,"column":13},"generated":{"line":1,"column":175}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":21,"column":9},"generated":{"line":1,"column":177}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":21,"column":27},"generated":{"line":1,"column":195}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":1,"column":198}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":22,"column":11},"generated":{"line":1,"column":205}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":22,"column":15},"generated":{"line":1,"column":209}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":22,"column":30},"generated":{"line":1,"column":217}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":23,"column":29},"generated":{"line":1,"column":226}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":23,"column":10},"generated":{"line":1,"column":230}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":23,"column":15},"generated":{"line":1,"column":235}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":23,"column":20},"generated":{"line":1,"column":240}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":23,"column":42},"generated":{"line":1,"column":244}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":23,"column":47},"generated":{"line":1,"column":249}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":23,"column":52},"generated":{"line":1,"column":254}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":23,"column":61},"generated":{"line":1,"column":259}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":23,"column":77},"generated":{"line":1,"column":261}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":271}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":24,"column":13},"generated":{"line":1,"column":276}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":24,"column":18},"generated":{"line":1,"column":281}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":24,"column":25},"generated":{"line":1,"column":284}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":24,"column":41},"generated":{"line":1,"column":286}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":25,"column":8},"generated":{"line":1,"column":293}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":298}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":1,"column":303}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":27,"column":27},"generated":{"line":1,"column":317}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":319}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":28,"column":10},"generated":{"line":1,"column":324}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":28,"column":15},"generated":{"line":1,"column":329}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":28,"column":20},"generated":{"line":1,"column":334}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":28,"column":27},"generated":{"line":1,"column":337}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":28,"column":43},"generated":{"line":1,"column":339}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":29,"column":10},"generated":{"line":1,"column":346}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":40,"column":9},"generated":{"line":1,"column":354}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":40,"column":29},"generated":{"line":1,"column":374}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":41,"column":4},"generated":{"line":1,"column":377}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":41,"column":11},"generated":{"line":1,"column":384}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":41,"column":15},"generated":{"line":1,"column":388}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":41,"column":30},"generated":{"line":1,"column":396}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":1,"column":400}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":42,"column":15},"generated":{"line":1,"column":405}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":42,"column":20},"generated":{"line":1,"column":410}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":42,"column":29},"generated":{"line":1,"column":415}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":42,"column":45},"generated":{"line":1,"column":417}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":425}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":43,"column":13},"generated":{"line":1,"column":430}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":43,"column":29},"generated":{"line":1,"column":446}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":45,"column":13},"generated":{"line":1,"column":456}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":45,"column":18},"generated":{"line":1,"column":461}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":45,"column":23},"generated":{"line":1,"column":466}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":1,"column":469}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":53,"column":10},"generated":{"line":1,"column":475}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":53,"column":31},"generated":{"line":1,"column":496}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":53,"column":44},"generated":{"line":1,"column":498}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":54,"column":32},"generated":{"line":1,"column":506}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":54,"column":8},"generated":{"line":1,"column":510}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":54,"column":13},"generated":{"line":1,"column":515}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":54,"column":23},"generated":{"line":1,"column":525}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":55,"column":6},"generated":{"line":1,"column":528}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":55,"column":11},"generated":{"line":1,"column":533}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":55,"column":21},"generated":{"line":1,"column":543}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":55,"column":28},"generated":{"line":1,"column":546}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":55,"column":29},"generated":{"line":1,"column":547}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":57,"column":6},"generated":{"line":1,"column":550}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":57,"column":11},"generated":{"line":1,"column":555}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":57,"column":21},"generated":{"line":1,"column":565}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":568}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":57,"column":31},"generated":{"line":1,"column":573}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":61,"column":10},"generated":{"line":1,"column":576}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":61,"column":33},"generated":{"line":1,"column":599}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":4},"generated":{"line":1,"column":602}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":32},"generated":{"line":1,"column":610}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":614}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":13},"generated":{"line":1,"column":619}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":23},"generated":{"line":1,"column":629}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":45},"generated":{"line":1,"column":633}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":50},"generated":{"line":1,"column":638}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":60},"generated":{"line":1,"column":648}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":65},"generated":{"line":1,"column":651}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":74},"generated":{"line":1,"column":658}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":62,"column":77},"generated":{"line":1,"column":660}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":1,"column":661}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":63,"column":12},"generated":{"line":1,"column":667}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":63,"column":22},"generated":{"line":1,"column":669}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":63,"column":27},"generated":{"line":1,"column":674}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":63,"column":37},"generated":{"line":1,"column":684}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":63,"column":42},"generated":{"line":1,"column":687}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":64,"column":6},"generated":{"line":1,"column":695}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":64,"column":19},"generated":{"line":1,"column":708}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":65,"column":8},"generated":{"line":1,"column":713}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":65,"column":17},"generated":{"line":1,"column":715}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":65,"column":22},"generated":{"line":1,"column":720}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":730}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":738}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":62},"generated":{"line":1,"column":744}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":50,"column":17},"generated":{"line":1,"column":746}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":50,"column":17},"generated":{"line":1,"column":748}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":50,"column":60},"generated":{"line":1,"column":753}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":17},"generated":{"line":1,"column":756}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":17},"generated":{"line":1,"column":758}},{"source":"../../../../src/utils/Mutex.ts","name":null,"original":{"line":51,"column":60},"generated":{"line":1,"column":768}}],"sources":{"../../../../src/utils/Mutex.ts":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nenum MutexLockStatus {\n  LOCKED,\n  UNLOCKED,\n}\n\ntype Callback = (...args: any[]) => any;\n\n/**\n * An async mutex lock.\n */\nexport class Mutex {\n  /**\n   * Lock for a specific key. If the lock has been acquired by another customer, then\n   * will wait until getting the lock.\n   *\n   * @param key - lock key\n   */\n  public static async lock(key: string): Promise<void> {\n    return new Promise<void>((resolve) => {\n      if (this.keys[key] === undefined || this.keys[key] === MutexLockStatus.UNLOCKED) {\n        this.keys[key] = MutexLockStatus.LOCKED;\n        resolve();\n      } else {\n        this.onUnlockEvent(key, () => {\n          this.keys[key] = MutexLockStatus.LOCKED;\n          resolve();\n        });\n      }\n    });\n  }\n\n  /**\n   * Unlock a key.\n   *\n   * @param key -\n   */\n  public static async unlock(key: string): Promise<void> {\n    return new Promise<void>((resolve) => {\n      if (this.keys[key] === MutexLockStatus.LOCKED) {\n        this.emitUnlockEvent(key);\n      }\n      delete this.keys[key];\n      resolve();\n    });\n  }\n\n  private static keys: { [key: string]: MutexLockStatus } = {};\n  private static listeners: { [key: string]: Callback[] } = {};\n\n  private static onUnlockEvent(key: string, handler: Callback) {\n    if (this.listeners[key] === undefined) {\n      this.listeners[key] = [handler];\n    } else {\n      this.listeners[key].push(handler);\n    }\n  }\n\n  private static emitUnlockEvent(key: string) {\n    if (this.listeners[key] !== undefined && this.listeners[key].length > 0) {\n      const handler = this.listeners[key].shift();\n      setImmediate(() => {\n        handler!.call(this);\n      });\n    }\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"c4d9b6d2b63106f1152afb4c78cc4793","cacheData":{"env":{}}}